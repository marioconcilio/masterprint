<% content_for :navbar do %>
  <%= render 'financeiro/navbar' %>
<% end %>

<div class="container-fluid">

  <!-- header -->
  <div class="row">
    <div class="col-lg-12">
      <div class="page-header">
        <h1>Novo Depósito</h1>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="panel panel-primary">
        <div class="panel-heading">Dados Bancários</div>
        <div class="panel-body">
          <%= form_for [:financeiro, @deposito] do |f| %>
            <%= render 'shared/error_messages', object: f.object %>

            <div class="form-group">
              <%= f.label :titular %>
              <%= f.text_field :titular, class: 'form-control title-case' %>
            </div>

            <div class="form-group row">
              <div class="col-md-2">
                <%= f.label :banco %>
                <%= f.text_field :banco, class: 'form-control number-field' %>
              </div>

              <div class="col-md-2">
                <%= f.label 'Agência' %>
                <%= f.text_field :agencia, class: 'form-control number-field' %>
              </div>

              <div class="col-md-4">
                <%= f.label :conta %>
                <%= f.text_field :conta, class: 'form-control' %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- form -->
  <div class="row">
    <div class="col-lg-8 col-sm-offset-2">
      <div class="well">

        <%= form_for [:financeiro, @deposito], html: { class: 'form-horizontal' } do |f| %>
          <legend>Dados Bancários</legend>
          <%= render 'shared/error_messages', object: f.object %>

          <div class="form-group">
            <%= f.label :titular, class: 'control-label col-sm-2' %>
            <div class="col-sm-9">
              <%= f.text_field :titular, class: 'form-control' %>
            </div>
          </div>

          <div class="form-group">
            <%= f.label :banco, class: 'control-label col-sm-2' %>
            <div class="col-sm-2">
              <%= f.text_field :banco, class: 'form-control number-field' %>
            </div>

            <%= f.label 'Agência', class: 'control-label col-sm-1' %>
            <div class="col-sm-2">
              <%= f.text_field :agencia, class: 'form-control number-field' %>
            </div>

            <%= f.label :conta, class: 'control-label col-sm-1' %>
            <div class="col-sm-3">
              <%= f.text_field :conta, class: 'form-control' %>
            </div>
          </div>

          <div class="form-group">
            <%= f.label :total, class: 'control-label col-sm-2' %>
            <div class="col-sm-5">
              <p class="form-control-static" id="deposito_total_static"><%= format_currency(get_total) %></p>
            </div>
          </div>
          <%= f.hidden_field :total, value: get_total %>

          <div class="pull-right">
            <%= link_to 'Voltar', financeiro_depositos_path, class: 'btn btn-default' %>
            <%= f.submit 'Salvar', class: "btn btn-primary" %>
          </div>
        <% end %>

        <legend>Cheques</legend>
        <div class="form-inline">
          <div class="form-group">
            <%= form_tag ch_financeiro_depositos_path, method: :get, remote: true, id: 'search-form' do %>
              <%= text_field_tag :ch_search,
                                 params[:ch_search],
                                 placeholder: 'Número do cheque',
                                 class: 'form-control number-field' %>
              <%= submit_tag 'Adicionar' , class: 'btn btn-default' %>
            <% end %>
          </div>
        </div>

        <!-- cheques table view -->
        <div class="row row-margin">
          <div class="col-lg-12">
            <div id="cheques-tableview"><%= render 'cheques' %></div>
          </div>
        </div>

      </div>
    </div>
  </div>

</div>
